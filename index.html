<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Browser</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            background: #f0f2f5;
            display: grid;
            grid-template-columns: 1fr 300px;
            min-height: 100vh;
        }

        /* Header Styles */
        .header {
            grid-column: 1 / -1;
            background: #fff;
            padding: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .search-bar {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            min-width: 300px;
        }

        .filter-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background: #f0f2f5;
        }

        .btn.active {
            background: #007bff;
            color: white;
        }

        /* Main Content Styles */
        .main-content {
            padding: 2rem;
            overflow-y: auto;
        }

        .folder-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .movie-item, .folder-item {
            padding: 1rem;
            background: white;
            margin: 0.5rem 0;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        /* Sidebar Styles */
        .sidebar {
            background: #fff;
            padding: 2rem;
            border-left: 1px solid #ddd;
            height: 100vh;
            position: sticky;
            top: 0;
        }

        .watchlist-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        .file-size {
            color: #666;
            font-size: 0.9em;
        }

        .date {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <header class="header">
        <input type="text" class="search-bar" placeholder="Search movies or folders...">
        <div class="filter-group">
            <button class="btn active" data-filter="all">All</button>
            <button class="btn" data-filter="folders">Folders</button>
            <button class="btn" data-filter="movies">Movies</button>
        </div>
        <div class="filter-group">
            <select class="btn" id="sort">
                <option value="az">A ‚Üí Z</option>
                <option value="za">Z ‚Üí A</option>
                <option value="modified">Last Modified</option>
                <option value="size">File Size</option>
            </select>
        </div>
    </header>

    <main class="main-content">
        <!-- Content will be populated by JavaScript -->
    </main>

    <aside class="sidebar">
        <h3>Watchlist</h3>
        <div id="watchlist">
            <!-- Watchlist items will be added here -->
        </div>
    </aside>

    <script>
        // Load movie data
        let movies = [];
        let watchlist = JSON.parse(localStorage.getItem('watchlist')) || [];

        fetch('movies.json')
            .then(response => response.json())
            .then(data => {
                movies = data.movies;
                renderContent();
                setupEventListeners();
            });

        function renderContent() {
            const mainContent = document.querySelector('.main-content');
            mainContent.innerHTML = '';

            // Group movies by folder
            const folders = {};
            movies.forEach(movie => {
                const folderPath = movie.path.split('\\').slice(-1)[0];
                if (!folders[folderPath]) {
                    folders[folderPath] = [];
                }
                folders[folderPath].push(movie);
            });

            // Render folders and movies
            for (const [folderName, folderMovies] of Object.entries(folders)) {
                const folderSection = document.createElement('div');
                folderSection.className = 'folder-section';
                folderSection.innerHTML = `
                    <h3>üìÅ ${folderName} (${folderMovies.length})</h3>
                    <div class="folder-movies"></div>
                `;

                const moviesContainer = folderSection.querySelector('.folder-movies');
                folderMovies.forEach(movie => {
                    const movieElement = createMovieElement(movie);
                    moviesContainer.appendChild(movieElement);
                });

                mainContent.appendChild(folderSection);
            }
        }

        function createMovieElement(movie) {
            const element = document.createElement('div');
            element.className = movie.extension ? 'movie-item' : 'folder-item';
            element.innerHTML = `
                <div>
                    ${movie.extension ? 'üé¨' : 'üìÅ'} ${movie.name}
                    ${movie.size ? `<span class="file-size">(${(movie.size/1024/1024).toFixed(1)} MB)</span>` : ''}
                </div>
                <div>
                    ${movie.modified_date ? `<span class="date">üìÖ ${movie.modified_date.split(' ')[0]}</span>` : ''}
                    <button class="btn add-watchlist">‚ûï Add to Watchlist</button>
                </div>
            `;
            return element;
        }

        function setupEventListeners() {
            // Add to watchlist
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('add-watchlist')) {
                    const movieName = e.target.closest('.movie-item').querySelector('div').innerText;
                    if (!watchlist.includes(movieName)) {
                        watchlist.push(movieName);
                        localStorage.setItem('watchlist', JSON.stringify(watchlist));
                        updateWatchlist();
                    }
                }
            });

            // Search functionality
            document.querySelector('.search-bar').addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                filterContent(searchTerm);
            });

            // Filter buttons
            document.querySelectorAll('[data-filter]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('[data-filter]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    filterContent();
                });
            });

            // Sort functionality
            document.querySelector('#sort').addEventListener('change', filterContent);
        }

        function filterContent(searchTerm = '') {
            // Implement filtering and sorting logic here
        }

        function updateWatchlist() {
            const watchlistDiv = document.getElementById('watchlist');
            watchlistDiv.innerHTML = watchlist.map(item => `
                <div class="watchlist-item">
                    <span>${item}</span>
                    <button class="btn" onclick="removeFromWatchlist('${item}')">üóëÔ∏è Remove</button>
                </div>
            `).join('');
        }

        window.removeFromWatchlist = function(item) {
            watchlist = watchlist.filter(i => i !== item);
            localStorage.setItem('watchlist', JSON.stringify(watchlist));
            updateWatchlist();
        }

        // Initial watchlist render
        updateWatchlist();
    </script>
</body>
</html>
